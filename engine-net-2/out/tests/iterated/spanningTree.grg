rule initST : (Node)
{
	modify
	{
		root:Node -- .;
		root -- . -- .;
		root -- n:Node -- root;
		n -- . -- . -- n;
		
		return(root);
	}
}

rule initDirected : (Node)
{
	modify
	{
		root:Node --> .;
		root --> . --> .;
		root --> n:Node --> root;
		n --> . --> . <-- n;
		
		return(root);
	}
}

rule spanningTree(root:Node)
{
	:SpanningTree(root);
	
	modify {
	}
}

pattern SpanningTree(root:Node)
{
	iterated {
		root -e:UEdge- next:Node;
		:SpanningTree(next);
		
		modify {
			eval {
				visited(e, 0) = true;
				visited(next, 0) = true;
			}
		}
	}
	
	modify {
	}
}

test edgesVisited
{
	-e:UEdge-;
	
	if {
		visited(e, 0);
	}
}

test nodesVisited
{
	n:Node;
	
	if {
		visited(n, 0);
	}
}

rule spanningTreeReverse(root:Node)
{
	:SpanningTreeReverse(root);
		
	modify { }
}

pattern SpanningTreeReverse(root:Node)
{
	iterated {
		root --> next:Node;
		sptrr:SpanningTreeReverse(next);
		
		replace {
			root <-- next;
			sptrr();
		}
	}
	
	modify { }
}
